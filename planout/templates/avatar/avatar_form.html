{% extends "base.html" %}
{%block title %}User {%endblock %}
{% load crispy_forms_tags %}

{% block content %}

<div class="container" id="crop-avatar">
  <!-- Current avatar -->
  <div class="avatar-view" title="Change the avatar" data-toggle="modal" data-target="#avatar-modal" 
       width:{{size}}px;height:{{size}}px>
    <img src="{{url}}" alt="Avatar">
  </div>

  <!-- Cropping modal -->
  <div class="modal fade" id="avatar-modal" aria-hidden="true" aria-labelledby="avatar-modal-label" role="dialog" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
          <div class="modal-header">
            <button class="close" data-dismiss="modal" type="button">&times;</button>
            <h4 class="modal-title" id="avatar-modal-label">Change Avatar</h4>
          </div>
          <div class="modal-body">
            <div class="avatar-body">
              <form class="avatar-form" action="{% url 'avatar:avatar_add' %}"  enctype="multipart/form-data" method="post">{% csrf_token %}
              <!-- Upload image and data -->
		<div class="avatar-upload">
                  <input class="avatar-src" name="avatar_src" type="hidden">
		  <!-- {% crispy upload_avatar_form %} -->
		  <input class="avatar-input" id="avatarInput" name="avatar_file" type="file">
		</div>	
	      </form>
              <!-- Crop and preview -->
              <div class="row">
                <div class="col-md-9">
                  <div class="avatar-wrapper"></div>
                </div>
                <div class="col-md-3">
                  <div class="avatar-preview preview-lg"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button class="btn btn-default" data-dismiss="modal" type="button">Close</button>
            <button class="btn btn-primary avatar-save" id="avatar-form-submit">Save</button>
          </div>
      </div>
    </div>
  </div><!-- /.modal -->

  <!-- Loading state -->
  <div class="loading" aria-label="Loading" role="img" tabindex="-1"></div>
</div>

{% endblock content %}
